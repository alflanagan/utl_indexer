#!/usr/bin/env dash

HAS_TOOLS=$(pip list | grep -c pip-tools)

if [ ${HAS_TOOLS} -lt 1 ]; then
    pip install pip-tools
fi

pip-compile requirements.in
pip-compile dev-requirements.in
pip-compile emacs-requirements.in

ALLFILE=$(mktemp)
cat requirements.txt dev-requirements.txt emacs-requirements.txt > ${ALLFILE}
pip-sync ${ALLFILE} -v
rm ${ALLFILE}
